---
# Klucze wg oficjalnej dokumentacji RabbitMQ
rabbitmq_repo_primary_signing_key_url: "https://github.com/rabbitmq/signing-keys/releases/download/3.0/rabbitmq-release-signing-key.asc"
rabbitmq_repo_erlang_repo_key_url: "https://github.com/rabbitmq/signing-keys/releases/download/3.0/cloudsmith.rabbitmq-erlang.E495BB49CC4BBE5B.key"
rabbitmq_repo_server_repo_key_url: "https://github.com/rabbitmq/signing-keys/releases/download/3.0/cloudsmith.rabbitmq-server.9F4587F226208342.key"

# Mirrory RabbitMQ (zalecane przez dokumentację)
rabbitmq_repo_erlang_baseurls:
  - "https://yum1.rabbitmq.com/erlang/el/{{ el_major }}/$basearch"
  - "https://yum2.rabbitmq.com/erlang/el/{{ el_major }}/$basearch"
rabbitmq_repo_erlang_noarch_baseurls:
  - "https://yum1.rabbitmq.com/erlang/el/{{ el_major }}/noarch"
  - "https://yum2.rabbitmq.com/erlang/el/{{ el_major }}/noarch"

rabbitmq_repo_server_baseurls:
  - "https://yum1.rabbitmq.com/rabbitmq/el/{{ el_major }}/$basearch"
  - "https://yum2.rabbitmq.com/rabbitmq/el/{{ el_major }}/$basearch"
rabbitmq_repo_server_noarch_baseurls:
  - "https://yum1.rabbitmq.com/rabbitmq/el/{{ el_major }}/noarch"
  - "https://yum2.rabbitmq.com/rabbitmq/el/{{ el_major }}/noarch"

# Ustawienia repo
rabbitmq_repo_enabled: true
rabbitmq_repo_gpgcheck: true
rabbitmq_repo_repo_gpgcheck: true
rabbitmq_repo_sslverify: true
rabbitmq_repo_metadata_expire: "300"
rabbitmq_repo_sslcacert: "/etc/pki/tls/certs/ca-bundle.crt"

# Dla EL8 przydatne
rabbitmq_repo_module_hotfixes: "{{ el_major == 8 }}"

# --- Konfiguracja instalacji i zarządzania RabbitMQ ---

# Czy instalować pakiety erlang + rabbitmq-server
rabbitmq_install_packages: true

# Nazwa usługi
rabbitmq_service_name: "rabbitmq-server"

# Katalog na dodatkowe pluginy (.ez)
rabbitmq_plugins_dir: "/usr/lib/rabbitmq/plugins"

# Plugin: rabbitmq_delayed_message_exchange
rabbitmq_install_dlx_plugin: true
rabbitmq_dlx_version: "4.1.0"
rabbitmq_dlx_filename: "rabbitmq_delayed_message_exchange-{{ rabbitmq_dlx_version }}.ez"
rabbitmq_dlx_url: "https://github.com/rabbitmq/rabbitmq-delayed-message-exchange/releases/download/v{{ rabbitmq_dlx_version }}/{{ rabbitmq_dlx_filename }}"

# Lista pluginów do włączenia
rabbitmq_plugins_to_enable:
  - rabbitmq_management
  - rabbitmq_prometheus
  - rabbitmq_delayed_message_exchange

# Zarządzanie użytkownikiem aplikacyjnym
rabbitmq_user_manage: true
rabbitmq_user_name: ""       # USTAW w inventory/vars
rabbitmq_user_password: ""   # USTAW w inventory/vars
rabbitmq_user_vhost: "/"
rabbitmq_user_configure_priv: ".*"
rabbitmq_user_read_priv: ".*"
rabbitmq_user_write_priv: ".*"
rabbitmq_user_tags: "administrator"

# Czy wykonać konfigurację (instalacja pluginu, włączenie pluginów, użytkownik)
rabbitmq_manage_enable: true